<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Speakify - SayRight Audio</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background: linear-gradient(135deg, #1e1e1e 0%, #2d2d2d 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            color: white;
        }

        h1 {
            text-align: center;
            font-family: monospace;
            color: #ff4757;
            padding: 35px 0;
            font-size: 2.5rem;
            text-shadow: 0 0 20px rgba(255, 71, 87, 0.5);
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }

        section {
            background: rgba(67, 67, 67, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
            margin: 20px 0;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        h2 {
            text-align: center;
            color: #70a1ff;
            margin-bottom: 30px;
            font-size: 1.8rem;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #a4b0be;
            font-weight: 500;
        }

        #text {
            width: 100%;
            padding: 15px 20px;
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: white;
            font-size: 16px;
            resize: vertical;
            min-height: 120px;
            transition: all 0.3s ease;
        }

        #text:focus {
            outline: none;
            border-color: #70a1ff;
            box-shadow: 0 0 20px rgba(112, 161, 255, 0.3);
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .control-group {
            display: flex;
            flex-direction: column;
        }

        select, input[type="range"] {
            padding: 10px;
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 14px;
        }

        input[type="range"] {
            -webkit-appearance: none;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: #70a1ff;
            border-radius: 50%;
            cursor: pointer;
        }

        .value-display {
            color: #70a1ff;
            font-weight: bold;
            margin-top: 5px;
        }

        .button-group {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        button {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #5f27cd 0%, #341f97 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(95, 39, 205, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
            color: white;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 107, 107, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #26d0ce 0%, #1dd1a1 100%);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(38, 208, 206, 0.4);
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .status {
            text-align: center;
            margin: 20px 0;
            padding: 10px;
            border-radius: 8px;
            font-weight: 500;
        }

        .status.speaking {
            background: rgba(26, 188, 156, 0.2);
            color: #1abc9c;
            border: 1px solid #1abc9c;
        }

        .status.paused {
            background: rgba(241, 196, 15, 0.2);
            color: #f1c40f;
            border: 1px solid #f1c40f;
        }

        .preset-texts {
            margin-top: 30px;
        }

        .preset-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .preset-btn {
            padding: 8px 16px;
            background: rgba(116, 185, 255, 0.2);
            border: 1px solid #74b9ff;
            border-radius: 20px;
            color: #74b9ff;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .preset-btn:hover {
            background: #74b9ff;
            color: white;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
                padding: 20px 0;
            }

            section {
                padding: 30px 20px;
                margin: 10px 0;
                border-radius: 15px;
            }

            .controls {
                grid-template-columns: 1fr;
            }

            .button-group {
                flex-direction: column;
                align-items: center;
            }

            button {
                width: 100%;
                max-width: 300px;
            }

            .preset-buttons {
                justify-content: center;
            }
        }

        .feature-info {
            background: rgba(52, 152, 219, 0.1);
            border: 1px solid #3498db;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            font-size: 14px;
            color: #3498db;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>SayRight</h1>
        
        <section>
            <h2>Improve your pronunciation</h2>
            
            <div class="input-group">
                <label for="text">Enter your text:</label>
                <textarea id="text" placeholder="Type or paste your text here..." rows="5"></textarea>
            </div>

            <div class="controls">
                <div class="control-group">
                    <label for="voiceSelect">Voice:</label>
                    <select id="voiceSelect">
                        <option value="">Loading voices...</option>
                    </select>
                </div>

                <div class="control-group">
                    <label for="rate">Speed:</label>
                    <input type="range" id="rate" min="0.5" max="2" step="0.1" value="1">
                    <div class="value-display" id="rateValue">1.0x</div>
                </div>

                <div class="control-group">
                    <label for="pitch">Pitch:</label>
                    <input type="range" id="pitch" min="0.5" max="2" step="0.1" value="1">
                    <div class="value-display" id="pitchValue">1.0</div>
                </div>

                <div class="control-group">
                    <label for="volume">Volume:</label>
                    <input type="range" id="volume" min="0" max="1" step="0.1" value="1">
                    <div class="value-display" id="volumeValue">100%</div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn-primary" onclick="speak()" id="speakBtn">
                    üîä Speak
                </button>
                <button class="btn-secondary" onclick="pauseResume()" id="pauseBtn" disabled>
                    ‚è∏ Pause
                </button>
                <button class="btn-secondary" onclick="stop()" id="stopBtn" disabled>
                    ‚èπ Stop
                </button>
                <button class="btn-success" onclick="downloadAudio()" id="downloadBtn" disabled>
                    üíæ Download
                </button>
            </div>

            <div class="status" id="status" style="display: none;"></div>

            <div class="preset-texts">
                <label>Quick samples:</label>
                <div class="preset-buttons">
                    <span class="preset-btn" onclick="setPresetText('Hello! Welcome to SayRight.')">Greeting</span>
                    <span class="preset-btn" onclick="setPresetText('The quick brown fox jumps over the lazy dog.')">Pangram</span>
                    <span class="preset-btn" onclick="setPresetText('Testing speech synthesis with different voices and settings.')">Test</span>
                    <span class="preset-btn" onclick="setPresetText('Thank you for using SayRight!')">Thank you</span>
                </div>
            </div>

            <div class="feature-info">
                <strong>New Features:</strong> Voice selection, speed/pitch/volume controls, pause/resume, stop functionality, audio download capability, and preset text samples!
            </div>
        </section>
    </div>

    <script>
        let currentUtterance = null;
        let isPaused = false;
        let voices = [];

        // Load available voices
        function loadVoices() {
            voices = speechSynthesis.getVoices();
            const voiceSelect = document.getElementById('voiceSelect');
            voiceSelect.innerHTML = '<option value="">Default Voice</option>';
            
            voices.forEach((voice, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = `${voice.name} (${voice.lang})`;
                voiceSelect.appendChild(option);
            });
        }

        // Load voices when they become available
        speechSynthesis.onvoiceschanged = loadVoices;
        loadVoices(); // Initial load

        // Update value displays for range inputs
        document.getElementById('rate').oninput = function() {
            document.getElementById('rateValue').textContent = this.value + 'x';
        };

        document.getElementById('pitch').oninput = function() {
            document.getElementById('pitchValue').textContent = this.value;
        };

        document.getElementById('volume').oninput = function() {
            document.getElementById('volumeValue').textContent = Math.round(this.value * 100) + '%';
        };

        function updateStatus(message, className = '') {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = 'status ' + className;
            status.style.display = 'block';
        }

        function updateButtons(speaking, paused = false) {
            document.getElementById('speakBtn').disabled = speaking && !paused;
            document.getElementById('pauseBtn').disabled = !speaking;
            document.getElementById('stopBtn').disabled = !speaking;
            document.getElementById('downloadBtn').disabled = speaking;
            
            const pauseBtn = document.getElementById('pauseBtn');
            if (paused) {
                pauseBtn.textContent = '‚ñ∂ Resume';
            } else {
                pauseBtn.textContent = '‚è∏ Pause';
            }
        }

        function speak() {
            const text = document.getElementById('text').value.trim();
            
            if (!text) {
                alert('Please enter some text to speak!');
                return;
            }

            // Stop any current speech
            speechSynthesis.cancel();

            currentUtterance = new SpeechSynthesisUtterance(text);
            
            // Apply settings
            const voiceIndex = document.getElementById('voiceSelect').value;
            if (voiceIndex && voices[voiceIndex]) {
                currentUtterance.voice = voices[voiceIndex];
            }
            
            currentUtterance.rate = parseFloat(document.getElementById('rate').value);
            currentUtterance.pitch = parseFloat(document.getElementById('pitch').value);
            currentUtterance.volume = parseFloat(document.getElementById('volume').value);

            // Event listeners
            currentUtterance.onstart = function() {
                updateStatus('Speaking...', 'speaking');
                updateButtons(true, false);
                isPaused = false;
            };

            currentUtterance.onend = function() {
                updateStatus('Finished speaking.');
                updateButtons(false);
                currentUtterance = null;
            };

            currentUtterance.onerror = function(event) {
                updateStatus('Error: ' + event.error);
                updateButtons(false);
                currentUtterance = null;
            };

            speechSynthesis.speak(currentUtterance);
        }

        function pauseResume() {
            if (speechSynthesis.paused) {
                speechSynthesis.resume();
                updateStatus('Resumed speaking...', 'speaking');
                updateButtons(true, false);
                isPaused = false;
            } else {
                speechSynthesis.pause();
                updateStatus('Speech paused.', 'paused');
                updateButtons(true, true);
                isPaused = true;
            }
        }

        function stop() {
            speechSynthesis.cancel();
            updateStatus('Speech stopped.');
            updateButtons(false);
            currentUtterance = null;
            isPaused = false;
        }

        async function downloadAudio() {
            const text = document.getElementById('text').value.trim();
            
            if (!text) {
                alert('Please enter some text first!');
                return;
            }

            try {
                // Create a temporary utterance for recording
                const utterance = new SpeechSynthesisUtterance(text);
                const voiceIndex = document.getElementById('voiceSelect').value;
                if (voiceIndex && voices[voiceIndex]) {
                    utterance.voice = voices[voiceIndex];
                }
                utterance.rate = parseFloat(document.getElementById('rate').value);
                utterance.pitch = parseFloat(document.getElementById('pitch').value);
                utterance.volume = parseFloat(document.getElementById('volume').value);

                // Note: Direct audio recording from speech synthesis is complex
                // This is a placeholder - in a real implementation you'd need additional libraries
                alert('Audio download feature requires additional setup. The speech synthesis API doesn\'t directly support audio file export. You could use libraries like RecordRTC or implement server-side text-to-speech services for this feature.');
                
            } catch (error) {
                alert('Download failed: ' + error.message);
            }
        }

        function setPresetText(text) {
            document.getElementById('text').value = text;
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(event) {
            if (event.ctrlKey || event.metaKey) {
                switch(event.key) {
                    case 'Enter':
                        event.preventDefault();
                        speak();
                        break;
                    case ' ':
                        event.preventDefault();
                        if (speechSynthesis.speaking) {
                            pauseResume();
                        }
                        break;
                    case 'Escape':
                        event.preventDefault();
                        stop();
                        break;
                }
            }
        });

        // Initialize
        document.getElementById('status').style.display = 'none';
    </script>
</body>
</html>
